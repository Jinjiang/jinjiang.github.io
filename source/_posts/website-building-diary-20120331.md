---
title: '网站装修笔记20120331'
date: 2012/03/31 11:48:18
updated: 2012/03/31 11:48:18
---

今天给我的网站加入了著名的百度统计。对，就是下面这个东西：

![页脚的百度统计](http://jiongks-typecho.stor.sinaapp.com/usr/uploads/2012/03/213230993.png)

相信这个小家伙会帮我更加了解我的网站的读者。  
虽然就是嵌入了一段脚本，不过幕后的工作不止于此。我在此做个备忘：

1. 更深入的了解了一下Typecho的插件机制，经过群友的提醒，才发现Typecho源码中有一组辅助插件开发的代码，它们被汇总放在了`/var/Helper.php`中。也弄清楚了Typecho中的Widget机制和命名规律。这让我决定通过插件的方式加入百度统计。
2. 我不在主题`footer.php`中直接加入百度统计，还有一层原因，就是为了保持主题的纯净，让主题可以被其他人也使用同时不被百度统计在内。
3. 通过插件加入百度统计之后，我又想到，可否让这个插件也分享给更多的百度统计的使用者。而不同的使用者，统计码都是不同的，这就需要我们把统计码做成一个插件的参数，而不是写死在插件里。于是又了解了一下插件的参数设置方式，把统计码做成了插件的参数。
4. 最后，我同时研究了一些Typecho的路由机制(Routing)和SAE的Storage服务接口，这为我给我的网站加入更多的单元或板块提供了更多想象空间。

接下来的计划是把这个插件分享出来，然后重新梳理并设计一下网站的路由规则。

以上